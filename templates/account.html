{% extends "base.html" %}

{% block content %}
    <div class="block is-vcentered is-centered">
        <div class="column is-10 is-offset-1">
        {% with messages = get_flashed_messages() %}
            {% if messages %}
                <div class="notification is-danger">
                    {{ messages[0] }}
                </div>
            {% endif %}
        {% endwith %}
        </div>
    <div class="block is-vcentered is-centered">
            <h1 class="title">
            Welcome, {{ firstname }}
        </h1>
    </div>
    <div class="block is-vcentered is-centered">
        <div class="buttons is-centered">
            <a class="button is-primary" href="{{ url_for('users.changepassword') }}">
                <strong>Change password</strong>
            </a>
        </div>
    </div>
    <p>
        <a class="button is-danger open-modal" data-modal-id="#my-modal"><strong>Delete Account</strong></a>
    </p>
    </div>
    <div id = "my-modal" class = "modal" aria-hidden="">
               <div class = "modal-background"></div>
               <div class = "modal-card">
                  <header class = "modal-card-head">
                     <p class = "modal-card-title">Account deletion</p>
                  </header>

                  <section class = "modal-card-body">
                     <div class = "content">
                        <h1>Are you sure?</h1>
                        <p>
                           This will permanently delete your account and data. There will be no way of retrieving it.
                        </p>

                     </div>
                  </section>
                   <footer class="modal-card-foot">
                      <button class="button is-danger">Delete account</button>
                      <button aria-label="close" class="button is-light close-modal" data-modal-id="#my-modal">Cancel</button>
                   </footer>

               </div>
    <script>
         function toggleModalClasses(event) {
             var modalId = event.currentTarget.dataset.modalId;
             var modal = $(modalId);
             modal.toggleClass('is-active');
             $('html').toggleClass('is-clipped');
            }

            $('.open-modal').click(toggleModalClasses);

            $('.close-modal').click(toggleModalClasses);
    </script>
    </div>

{% endblock %}